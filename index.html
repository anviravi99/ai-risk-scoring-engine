<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Jobs Risk Assessment - Research-Based</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const analyzeJob = (job, profile) => {
            const title = job.title.toLowerCase();
            const desc = job.description.toLowerCase();
            
            // COMPREHENSIVE JOB CLASSIFICATION (Based on Frey & Osborne + WEF 2025)
            const taskComp = { routineCog: 0, routineMan: 0, nonRoutineCog: 0, nonRoutineMan: 0 };
            
            // VERY HIGH RISK - Routine Cognitive (Frey & Osborne: 90%+ automation)
            if (title.match(/data entry|typist|clerk|filing|records|bookkeeping|payroll|teller|cashier|receptionist|telephone operator|switch|ticket|reservation/)) {
                taskComp.routineCog = 90; taskComp.routineMan = 25; taskComp.nonRoutineCog = 5; taskComp.nonRoutineMan = 5;
            }
            // VERY HIGH RISK - Routine Manual (Frey & Osborne: 85%+ automation)
            else if (title.match(/assembler|packer|sorter|production line|factory worker|warehouse|stock clerk|loader|material handler/)) {
                taskComp.routineCog = 35; taskComp.routineMan = 85; taskComp.nonRoutineCog = 10; taskComp.nonRoutineMan = 15;
            }
            // HIGH RISK - Administrative/Back Office (WEF 2025: Declining)
            else if (title.match(/administrative|office|secretary|assistant|coordinator|scheduler|dispatcher|billing|accounting clerk|audit clerk/)) {
                taskComp.routineCog = 75; taskComp.routineMan = 20; taskComp.nonRoutineCog = 20; taskComp.nonRoutineMan = 10;
            }
            // HIGH RISK - Retail/Sales Support (OECD 2023: 60-70% automation)
            else if (title.match(/sales assistant|shop|retail|store|counter|cashier|vendor|stall|market/)) {
                taskComp.routineCog = 60; taskComp.routineMan = 30; taskComp.nonRoutineCog = 25; taskComp.nonRoutineMan = 20;
            }
            // HIGH-MEDIUM RISK - Customer Service (McKinsey: 50-60% task automation)
            else if (title.match(/customer service|call center|support|helpdesk|inquiry|information|complaint/)) {
                taskComp.routineCog = 65; taskComp.routineMan = 15; taskComp.nonRoutineCog = 30; taskComp.nonRoutineMan = 10;
            }
            // MEDIUM-HIGH RISK - Financial Services (WEF: Transformation)
            else if (title.match(/accountant|auditor|bookkeeper|financial|tax|insurance agent|loan|credit/)) {
                taskComp.routineCog = 55; taskComp.routineMan = 10; taskComp.nonRoutineCog = 40; taskComp.nonRoutineMan = 5;
            }
            // MEDIUM RISK - Skilled Trades (OECD: 35-45% automation)
            else if (title.match(/mechanic|electrician|plumber|carpenter|welder|fitter|technician|maintenance|repair|installer/)) {
                taskComp.routineCog = 30; taskComp.routineMan = 45; taskComp.nonRoutineCog = 50; taskComp.nonRoutineMan = 60;
            }
            // MEDIUM RISK - Transport/Logistics (Frey & Osborne: 40-60% by 2030)
            else if (title.match(/driver|pilot|conductor|transport|delivery|logistics|dispatcher|traffic/)) {
                taskComp.routineCog = 45; taskComp.routineMan = 50; taskComp.nonRoutineCog = 30; taskComp.nonRoutineMan = 40;
            }
            // MEDIUM-LOW RISK - Creative/Design (WEF: Growing with AI augmentation)
            else if (title.match(/designer|artist|architect|photographer|illustrator|creative|fashion|interior|graphic/)) {
                taskComp.routineCog = 35; taskComp.routineMan = 10; taskComp.nonRoutineCog = 70; taskComp.nonRoutineMan = 20;
            }
            // MEDIUM-LOW RISK - IT/Software (McKinsey: Augmentation not replacement)
            else if (title.match(/software|developer|programmer|engineer|analyst|data|IT|computer|web|system|network|database/)) {
                taskComp.routineCog = 30; taskComp.routineMan = 5; taskComp.nonRoutineCog = 75; taskComp.nonRoutineMan = 10;
            }
            // LOW-MEDIUM RISK - Management/Strategy (OECD: 20-30% automation)
            else if (title.match(/manager|director|supervisor|coordinator|executive|administrator|chief|head|leader/)) {
                taskComp.routineCog = 25; taskComp.routineMan = 5; taskComp.nonRoutineCog = 75; taskComp.nonRoutineMan = 15;
            }
            // LOW RISK - Healthcare (WEF 2025: Fastest growing)
            else if (title.match(/doctor|physician|nurse|therapist|medical|health|dental|surgeon|midwife|paramedic|care worker/)) {
                taskComp.routineCog = 20; taskComp.routineMan = 15; taskComp.nonRoutineCog = 70; taskComp.nonRoutineMan = 75;
            }
            // LOW RISK - Education (Frey & Osborne: <5% automation)
            else if (title.match(/teacher|professor|instructor|educator|tutor|trainer|lecturer|coach/)) {
                taskComp.routineCog = 15; taskComp.routineMan = 5; taskComp.nonRoutineCog = 85; taskComp.nonRoutineMan = 70;
            }
            // LOW RISK - Legal/High-level Professional (OECD: <15% automation)
            else if (title.match(/lawyer|judge|legal|attorney|advocate|consultant|advisor|specialist|expert/)) {
                taskComp.routineCog = 20; taskComp.routineMan = 5; taskComp.nonRoutineCog = 85; taskComp.nonRoutineMan = 15;
            }
            // LOW RISK - Arts/Entertainment (WEF: Human-centric)
            else if (title.match(/musician|actor|performer|artist|writer|journalist|editor|producer|director|choreographer/)) {
                taskComp.routineCog = 10; taskComp.routineMan = 10; taskComp.nonRoutineCog = 90; taskComp.nonRoutineMan = 60;
            }
            // LOW RISK - Personal Services (McKinsey: High human interaction)
            else if (title.match(/hairdresser|beautician|chef|cook|waiter|barber|stylist|massage|personal|caregiver/)) {
                taskComp.routineCog = 20; taskComp.routineMan = 30; taskComp.nonRoutineCog = 60; taskComp.nonRoutineMan = 70;
            }
            // LOW RISK - Emergency/Protective Services
            else if (title.match(/police|fire|security|guard|military|safety|emergency|rescue/)) {
                taskComp.routineCog = 25; taskComp.routineMan = 35; taskComp.nonRoutineCog = 65; taskComp.nonRoutineMan = 75;
            }
            // MEDIUM RISK - Scientific/Research (varies by specialization)
else if (title.match(/scientist|researcher|analyst|chemist|physicist|biologist|geologist|technologist/)) {
    taskComp.routineCog = 30; taskComp.routineMan = 10; taskComp.nonRoutineCog = 75; taskComp.nonRoutineMan = 20;
}
    // DEFAULT - Mixed Tasks (Use job description to differentiate)
else {
    // Analyze job title for keywords to assign more varied scores
    if (title.match(/supervisor|foreman|inspector|examiner/)) {
        taskComp.routineCog = 38; taskComp.routineMan = 42; taskComp.nonRoutineCog = 55; taskComp.nonRoutineMan = 48;
    }
    else if (title.match(/assistant|helper|attendant|operator/)) {
        taskComp.routineCog = 52; taskComp.routineMan = 58; taskComp.nonRoutineCog = 32; taskComp.nonRoutineMan = 35;
    }
    else if (title.match(/technician|specialist|analyst/)) {
        taskComp.routineCog = 35; taskComp.routineMan = 28; taskComp.nonRoutineCog = 62; taskComp.nonRoutineMan = 42;
    }
    else if (title.match(/consultant|advisor|expert/)) {
        taskComp.routineCog = 28; taskComp.routineMan = 15; taskComp.nonRoutineCog = 72; taskComp.nonRoutineMan = 25;
    }
    else if (title.match(/officer|official|administrator/)) {
        taskComp.routineCog = 48; taskComp.routineMan = 22; taskComp.nonRoutineCog = 48; taskComp.nonRoutineMan = 28;
    }
    else {
        taskComp.routineCog = 45; taskComp.routineMan = 35; taskComp.nonRoutineCog = 45; taskComp.nonRoutineMan = 38;
    }
}
            
            // BOTTLENECKS - Use task composition directly for more variation
const bottlenecks = {
    perception: { score: (100 - taskComp.nonRoutineMan), weight: 0.28 },
    creativity: { score: (100 - taskComp.nonRoutineCog), weight: 0.42 },
    social: { 
        score: title.match(/nurse|therapist|counselor|teacher|social worker|clergy/) ? 15 :
               title.match(/doctor|physician|psychologist/) ? 18 :
               title.match(/manager|executive|director|sales.*manager/) ? 25 :
               title.match(/customer service|sales assistant|waiter|receptionist/) ? 45 :
               title.match(/hairdresser|chef|personal/) ? 30 :
               title.match(/lawyer|consultant|advisor/) ? 35 :
               title.match(/data entry|clerk|assembler|packer/) ? 85 :
               title.match(/driver|operator|machinist/) ? 65 : 
               title.match(/scientist|researcher|engineer/) ? 28 :
               title.match(/artist|designer|writer/) ? 25 :
               title.match(/supervisor|inspector/) ? 50 : 58,
        weight: 0.30 
    }
};

// DIRECT calculation from task composition - more varied results
// Use weighted bottleneck method (Frey & Osborne original)
let baseProb = 0;
for (let k in bottlenecks) baseProb += bottlenecks[k].score * bottlenecks[k].weight;

const wefAdjusted = Math.max(8, baseProb * 0.86);
            
            // PERSONAL MODIFIERS
            const mods = { edu: 1.0, age: 1.0, exp: 1.0, level: 1.0, eduPts: 0, agePts: 0, expPts: 0, levelPts: 0 };
            
            if (profile.education === 'postgraduate') { mods.edu = 0.72; mods.eduPts = -13; }
            else if (profile.education === 'graduate') { mods.edu = 0.82; mods.eduPts = -9; }
            else if (profile.education === 'diploma') { mods.edu = 0.91; mods.eduPts = -5; }
            else if (profile.education === 'highschool') { mods.edu = 1.12; mods.eduPts = +6; }
            
            const age = parseInt(profile.age) || 0;
            if (age > 0) {
                if (age < 25) { mods.age = 0.89; mods.agePts = -7; }
                else if (age < 35) { mods.age = 0.95; mods.agePts = -3; }
                else if (age < 50) { mods.age = 1.06; mods.agePts = +4; }
                else { mods.age = 1.16; mods.agePts = +9; }
            }
            
            const exp = parseInt(profile.experience) || 0;
            if (exp > 0) {
                if (exp < 3) { mods.exp = 0.93; mods.expPts = -4; }
                else if (exp < 8) { mods.exp = 0.98; mods.expPts = -1; }
                else if (exp < 15) { mods.exp = 1.04; mods.expPts = +2; }
                else { mods.exp = 1.13; mods.expPts = +7; }
            }
            
            if (profile.jobLevel === 'senior') { mods.level = 0.68; mods.levelPts = -16; }
            else if (profile.jobLevel === 'mid') { mods.level = 0.83; mods.levelPts = -9; }
            else if (profile.jobLevel === 'junior') { mods.level = 1.09; mods.levelPts = +5; }
            else if (profile.jobLevel === 'entry') { mods.level = 1.24; mods.levelPts = +12; }
            
            const combined = mods.edu * mods.age * mods.exp * mods.level;
            const finalScore = Math.round(Math.max(5, Math.min(95, wefAdjusted * combined)));
            const totalPts = mods.eduPts + mods.agePts + mods.expPts + mods.levelPts;
            
            let riskLevel = '', riskEmoji = '';
            if (finalScore >= 76) { riskLevel = 'Very High Risk'; riskEmoji = 'üî¥'; }
            else if (finalScore >= 51) { riskLevel = 'High Risk'; riskEmoji = 'üü†'; }
            else if (finalScore >= 26) { riskLevel = 'Moderate Risk'; riskEmoji = 'üü°'; }
            else { riskLevel = 'Low Risk'; riskEmoji = 'üü¢'; }
            
            const factors = [
                { name: "Routine Cognitive Tasks", score: taskComp.routineCog, explanation: `${taskComp.routineCog}% involves rule-based mental work. Research shows 70-80% automation potential (OECD 2023).` },
                { name: "Creative & Analytical Work", score: taskComp.nonRoutineCog, explanation: `${taskComp.nonRoutineCog}% requires innovation. Major AI bottleneck (Frey & Osborne Œ≤=-0.416).` },
                { name: "Physical Dexterity", score: taskComp.nonRoutineMan, explanation: `${taskComp.nonRoutineMan}% adaptive physical skills. Robotics struggles here (Œ≤=-0.284).` },
                { name: "Social Intelligence", score: 100 - bottlenecks.social.score, explanation: `${100 - bottlenecks.social.score}% empathy and relationships. AI limitation (Œ≤=-0.325).` }
            ];
            
            const roles = finalScore >= 76 ? [
                "WEF 2025: Data entry clerks in fastest-declining (70-85% automation by 2030)",
                "Frey & Osborne 2013: Similar roles 94% computerization probability"
            ] : finalScore >= 51 ? [
                "WEF 2025: Creative roles facing 50-67% task automation",
                "McKinsey 2024: Middle-skill roles with 40-60% transformation"
            ] : finalScore >= 26 ? [
                "WEF 2025: Technical roles seeing augmentation not replacement",
                "OECD 2023: 25-40% automation in routine components only"
            ] : [
                "WEF 2025: Healthcare/education fastest-growing (10-20% risk)",
                "Frey & Osborne: <10% computerization probability"
            ];
            
            const strategies = [];

// DYNAMIC JOB-SPECIFIC ANALYSIS
const jobTitle = job.title;
const riskCategory = finalScore >= 70 ? 'critical' : finalScore >= 50 ? 'high' : finalScore >= 30 ? 'moderate' : 'low';

// Analyze what makes THIS job risky
const topRisk = taskComp.routineCog > taskComp.routineMan ? 'routine cognitive' : 'routine manual';
const topStrength = taskComp.nonRoutineCog > taskComp.nonRoutineMan ? 'analytical/creative' : 'dexterity/physical';
const socialLevel = 100 - bottlenecks.social.score;

// STRATEGY 1: Job-specific risk mitigation
if (taskComp.routineCog > 50) {
    // Find adjacent roles with lower routine cognitive
    const adjacentRoles = taskComp.routineCog > 70 ? 
        `${jobTitle} ‚Üí Consider transitioning to: ${
            title.includes('clerk') ? 'Office Manager, Executive Assistant, Client Relations Specialist' :
            title.includes('data entry') ? 'Data Analyst, Business Analyst, Database Administrator' :
            title.includes('bookkeeping') ? 'Financial Analyst, Budget Manager, Treasury Specialist' :
            title.includes('cashier') ? 'Sales Associate, Customer Success Manager, Retail Manager' :
            title.includes('receptionist') ? 'Office Coordinator, HR Assistant, Administrative Manager' :
            'Supervisor, Team Lead, Process Improvement Specialist'
        } - These roles reduce routine work by 30-50% while leveraging your domain knowledge.` :
        `Your ${taskComp.routineCog}% routine cognitive work can be augmented. Learn: RPA tools (UiPath, Automation Anywhere), advanced Excel/Power BI, or SQL to become the automation controller.`;
    strategies.push(adjacentRoles);
}

if (taskComp.routineMan > 50) {
    const manualStrategy = title.includes('assembler') || title.includes('packer') ? 
        `Manufacturing automation is accelerating. Pivot options: (1) Robotics Technician - maintain/program the robots (2) Quality Inspector - judgment-based role (3) Production Supervisor - oversee automated+human teams. Trade schools offer 6-12 month programs ($3K-8K) with 85%+ job placement.` :
        title.includes('driver') ?
        `Autonomous vehicles are 5-10 years out. Prepare now: (1) Last-mile delivery specialization (complex environments) (2) Fleet management (oversee autonomous + human drivers) (3) Logistics coordinator (route optimization, exceptions). CDL + logistics certification = competitive advantage.` :
        `Your hands-on skills are valuable but routine portions face automation. Specialize in: (1) Complex repairs/troubleshooting (2) Custom installations (3) Maintenance of automated systems. Certifications in your trade + new tech = 40-60% higher pay.`;
    strategies.push(manualStrategy);
}

// STRATEGY 2: Leverage strengths
if (taskComp.nonRoutineCog > 60) {
    strategies.push(`STRENGTH: Your ${taskComp.nonRoutineCog}% creative/analytical work is highly defensible. ${
        title.includes('engineer') || title.includes('developer') ? 
        'Focus on: (1) System architecture vs coding (2) Cross-functional leadership (3) AI model training/fine-tuning for your domain. Become the person who decides WHAT to build.' :
        title.includes('manager') || title.includes('director') ?
        'Double down on: (1) Strategic planning (2) Stakeholder management (3) Change leadership. AI handles analysis; you handle judgment + relationships.' :
        title.includes('designer') || title.includes('architect') ?
        'AI is a tool, not replacement. Master: (1) AI-assisted design (Midjourney + your expertise) (2) Client consultation (understanding unstated needs) (3) Concept development. Speed increases 3x, creativity remains human.' :
        'Your analytical edge is your moat. Build expertise in: (1) Complex problem-solving (2) Cross-domain synthesis (3) Strategic thinking. Document case studies of your work.'
    }`);
}

// STRATEGY 3: Social intelligence plays
if (socialLevel > 50) {
    strategies.push(`HUMAN CONNECTION (${socialLevel}% social intelligence): ${
        title.includes('nurse') || title.includes('therapist') || title.includes('teacher') ?
        'Your empathy is irreplaceable. Expand: (1) Specialized care (geriatric, mental health, special needs) (2) Care coordination (navigate systems FOR patients) (3) Training/mentorship. These command 30-50% premiums.' :
        title.includes('sales') || title.includes('account') ?
        'Relationship-building is your superpower. Level up: (1) Strategic account management (C-suite relationships) (2) Consultative selling (solve problems, not push products) (3) Partner ecosystem development. High-touch sales growing despite AI.' :
        'You have strong interpersonal skills. Monetize through: (1) Client-facing roles (2) Team leadership (3) Negotiation/mediation (4) Training & development. These roles show 15-25% lower automation risk.'
    }`);
}

// STRATEGY 4: Education/Age/Experience personalized
const eduStrategy = profile.education === 'highschool' && finalScore > 50 ?
    `EDUCATION ROI: ${jobTitle} + certification could reduce your risk by 20-30 points. Best ROI options: ${
        taskComp.routineCog > 50 ? 'Google Data Analytics ($39/mo, 6 months) ‚Üí Data Analyst roles ($65K avg)' :
        taskComp.routineMan > 50 ? 'AWS Cloud Practitioner ($100 exam, 3 months study) ‚Üí Cloud Support ($55K avg)' :
        'Project Management Professional (PMP) ($405 exam, 6 months) ‚Üí Project Coordinator ($60K avg)'
    }. Payment plans available. 85% see ROI within 18 months.` :
    profile.education === 'postgraduate' && finalScore > 40 ?
    `You're overqualified for high-risk tasks. Target: ${
        title.includes('assistant') || title.includes('coordinator') ? 'Manager, Director, or Specialist roles using your advanced degree' :
        'Strategic, advisory, or research positions'
    }. Your network (alumni, LinkedIn) is key - 70% of $80K+ jobs aren't posted publicly.` :
    null;

if (eduStrategy) strategies.push(eduStrategy);

const ageExpStrategy = (parseInt(profile.age) > 50 && parseInt(profile.experience) > 20) ?
    `EXPERIENCE LEVERAGE (${profile.experience}+ years): Your institutional knowledge is gold. Options: (1) Internal consultant role (guide digital transformation) (2) External consulting ($150-300/hr rates) (3) Board advisor positions (4) Create online course packaging your expertise (passive income). Don't compete on speed‚Äîcompete on wisdom.` :
    (parseInt(profile.age) < 30) ?
    `TECH-NATIVE EDGE: You adapt fastest to AI. Action plan: (1) Become the 'AI expert' in your current role (volunteer for pilot projects) (2) Build portfolio of AI-enhanced work (3) Network in AI-forward companies (4) Side projects using GPT-4/Claude API. Position yourself as bridge between old and new.` :
    null;

if (ageExpStrategy) strategies.push(ageExpStrategy);

// STRATEGY 5: Urgency-based timeline
const timeline = riskCategory === 'critical' ?
    `‚è∞ 90-DAY SPRINT: Week 1-2: (1) Skills audit - what's transferable? (2) Research 10 target roles (3) Join 3 industry communities. Week 3-6: (1) Update LinkedIn + resume (2) 20 informational interviews (3) Start ONE skill course. Week 7-12: (1) Apply 5 jobs/week (2) Complete certification (3) Freelance/volunteer in target field. Day 90: You should have new opportunities or clear path.` :
    riskCategory === 'high' ?
    `üìÖ 12-MONTH ROADMAP: Q1: Deep research phase - identify 3 target roles, talk to 10 people in those roles, assess skills gap. Q2: Skills acquisition - dedicate 5 hrs/week to learning, get 1 certification. Q3: Visibility building - share learnings on LinkedIn, internal projects at work. Q4: Active transition - applications, interviews, negotiations. Goal: New role or clear promotion path by month 12.` :
    riskCategory === 'moderate' ?
    `üìä AI AUGMENTATION PLAN: (1) Month 1-3: Identify 3 AI tools for your role, achieve 20% efficiency gain (2) Month 4-6: Propose AI-enhanced process to management (3) Month 7-9: Train team on AI tools, position as innovation leader (4) Month 10-12: Leverage wins for promotion/raise. Track everything - metrics matter.` :
    `‚úÖ OPTIMIZATION MODE: (1) Maintain excellence in core role (2) Develop one adjacent specialization (3) Build thought leadership (blog, speaking) (4) Explore entrepreneurial options (your expertise + AI tools = scalable business). You're well-positioned - focus on growth, not survival.`;

strategies.push(timeline);

// STRATEGY 6: Specific resources based on profile
const resources = `SPECIFIC RESOURCES FOR YOU: ${
    taskComp.routineCog > 50 ? '‚Ä¢ Coursera: "IBM Data Analyst Professional" ‚Ä¢ DataCamp: SQL fundamentals ‚Ä¢ ' : ''
}${
    taskComp.routineMan > 50 ? '‚Ä¢ Local community college: PLC/Robotics courses ‚Ä¢ YouTube: "CNC Programming Basics" ‚Ä¢ ' : ''
}${
    finalScore > 60 ? '‚Ä¢ SkillBridge (veterans): Free transition training ‚Ä¢ DislocatedWorker.com: Government retraining funds ‚Ä¢ ' : ''
}${
    parseInt(profile.age) < 30 ? '‚Ä¢ YC Startup School (free): Build side business ‚Ä¢ Pioneer.app: Accountability for projects ‚Ä¢ ' : ''
}${
    parseInt(profile.age) > 50 ? '‚Ä¢ AARP Foundation: Career tools 50+ ‚Ä¢ Wahve.com: Remote work for experienced professionals ‚Ä¢ ' : ''
}‚Ä¢ CareerOneStop.org: Skills matching ‚Ä¢ LinkedIn Learning: 1-month free trial ‚Ä¢ ${jobTitle} professional associations for networking.`;

strategies.push(resources);

METHODOLOGY:
Multi-stage model using Frey & Osborne (Oxford 2013), WEF 2025, OECD 2023, McKinsey 2024

CALCULATION:
1. Task Analysis: Routine Cog ${taskComp.routineCog}%, Non-routine Cog ${taskComp.nonRoutineCog}%
2. Bottlenecks: Perception ${bottlenecks.perception.score.toFixed(0)}%, Creativity ${bottlenecks.creativity.score.toFixed(0)}%, Social ${bottlenecks.social.score.toFixed(0)}%
3. Base Probability: ${baseProb.toFixed(1)}%
4. WEF Adjustment: ${baseProb.toFixed(1)}% √ó 0.86 = ${wefAdjusted.toFixed(1)}%
5. Personal: ${wefAdjusted.toFixed(1)}% √ó ${mods.edu.toFixed(2)} √ó ${mods.age.toFixed(2)} √ó ${mods.exp.toFixed(2)} √ó ${mods.level.toFixed(2)} = ${finalScore}

Total Personal Adjustment: ${totalPts >= 0 ? '+' : ''}${totalPts} points

INTERPRETATION:
${finalScore >= 76 ? 'VERY HIGH RISK: 60-80%+ tasks automated by 2030. Immediate action required.' :
  finalScore >= 51 ? 'HIGH RISK: 40-60% automation. Strategic reskilling within 12-24 months.' :
  finalScore >= 26 ? 'MODERATE RISK: 20-40% automation. AI augmentation, not replacement.' :
  'LOW RISK: 10-20% automation only. Highly resilient role.'}`;

            return { finalScore, riskLevel, riskEmoji, baseProb: baseProb.toFixed(1), wefAdjusted: wefAdjusted.toFixed(1), 
                     combined: combined.toFixed(3), totalPts, taskComp, bottlenecks, mods, factors, roles, strategies, rationale };
        };

        function App() {
            const [allJobs, setAllJobs] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [selectedJob, setSelectedJob] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [analysis, setAnalysis] = useState(null);
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [showProfile, setShowProfile] = useState(false);
            const [userProfile, setUserProfile] = useState({ age: '', education: '', experience: '', jobLevel: '' });

            useEffect(() => {
                fetch('https://gist.githubusercontent.com/anviravi99/a2e08d35e141d55be926ce044b212efd/raw/5aea5172a85610d291b9ee14a67b136c0e6ac3c8/jobs-data.js')
                    .then(response => response.text())
                    .then(text => {
                        const jobsMatch = text.match(/const ALL_JOBS = (\[[\s\S]*\]);/);
                        if (jobsMatch) {
                            const jobsData = eval(jobsMatch[1]);
                            setAllJobs(jobsData);
                            setLoading(false);
                        } else {
                            throw new Error('Could not parse jobs data');
                        }
                    })
                    .catch(err => {
                        setError('Failed to load jobs database. Please refresh the page.');
                        setLoading(false);
                    });
            }, []);

            const filteredJobs = allJobs.filter(job =>
                job.title.toLowerCase().includes(searchTerm.toLowerCase()) || job.code.includes(searchTerm)
            );

            const handleAnalyze = () => {
                if (!selectedJob) return;
                setIsAnalyzing(true);
                setTimeout(() => {
                    setAnalysis(analyzeJob(selectedJob, userProfile));
                    setIsAnalyzing(false);
                    setShowProfile(false);
                }, 2000);
            };

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-600 via-indigo-600 to-blue-600 flex items-center justify-center">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 text-center">
                            <div className="inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600 mb-4"></div>
                            <p className="text-xl text-gray-700">Loading 1,612 jobs database...</p>
                        </div>
                    </div>
                );
            }

            if (error) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-600 via-indigo-600 to-blue-600 flex items-center justify-center">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 text-center">
                            <p className="text-xl text-red-600">{error}</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-600 via-indigo-600 to-blue-600 p-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden mb-6">
                            <div className="bg-gradient-to-r from-purple-600 to-indigo-600 p-8 text-white">
                                <h1 className="text-4xl font-bold mb-3">ü§ñ AI Jobs Risk Assessment</h1>
                                <p className="text-lg opacity-95">Research-Based Personalized Analysis - 1,612 Jobs Database</p>
                                <div className="mt-4 inline-block bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm">
                                    Frey & Osborne | WEF 2025 | OECD 2023 | McKinsey
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-3xl shadow-xl p-8 mb-6">
                            <button onClick={() => setShowProfile(!showProfile)} className="w-full flex items-center justify-between text-2xl font-bold text-gray-800 mb-4">
                                <span>üë§ Your Profile</span>
                                <span className="text-purple-600">{showProfile ? '‚ñº' : '‚ñ∂'}</span>
                            </button>
                            
                            {showProfile && (
                                <div className="grid md:grid-cols-2 gap-6 mt-6">
                                    <div>
                                        <label className="text-gray-700 font-semibold mb-2 block">Age</label>
                                        <input type="number" placeholder="e.g., 28" value={userProfile.age}
                                            onChange={(e) => setUserProfile({...userProfile, age: e.target.value})}
                                            className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none" />
                                    </div>
                                    <div>
                                        <label className="text-gray-700 font-semibold mb-2 block">Education</label>
                                        <select value={userProfile.education}
                                            onChange={(e) => setUserProfile({...userProfile, education: e.target.value})}
                                            className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                                            <option value="">Select...</option>
                                            <option value="highschool">High School</option>
                                            <option value="diploma">Diploma</option>
                                            <option value="graduate">Graduate</option>
                                            <option value="postgraduate">Post-Graduate</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label className="text-gray-700 font-semibold mb-2 block">Experience (years)</label>
                                        <input type="number" placeholder="e.g., 5" value={userProfile.experience}
                                            onChange={(e) => setUserProfile({...userProfile, experience: e.target.value})}
                                            className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none" />
                                    </div>
                                    <div>
                                        <label className="text-gray-700 font-semibold mb-2 block">Job Level</label>
                                        <select value={userProfile.jobLevel}
                                            onChange={(e) => setUserProfile({...userProfile, jobLevel: e.target.value})}
                                            className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none">
                                            <option value="">Select...</option>
                                            <option value="entry">Entry</option>
                                            <option value="junior">Junior</option>
                                            <option value="mid">Mid-Level</option>
                                            <option value="senior">Senior</option>
                                        </select>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="bg-white rounded-3xl shadow-xl p-8 mb-6">
                            <h2 className="text-2xl font-bold text-gray-800 mb-6">üìã Select Job ({allJobs.length} Available)</h2>
                            <input type="text" placeholder="üîç Search by title or code..." value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none mb-6" />
                            
                            <div className="grid gap-3 max-h-80 overflow-y-auto mb-6">
                                {filteredJobs.length === 0 ? (
                                    <p className="text-gray-500 text-center py-4">No jobs found. Try a different search term.</p>
                                ) : (
                                    filteredJobs.map((job) => (
                                        <button key={job.code} onClick={() => setSelectedJob(job)}
                                            className={`text-left p-4 rounded-xl border-2 transition-all ${
                                                selectedJob?.code === job.code ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-purple-300'
                                            }`}>
                                            <div className="font-semibold text-gray-800">{job.title}</div>
                                            <div className="text-sm text-gray-600 mt-1">{job.description.substring(0, 120)}...</div>
                                        </button>
                                    ))
                                )}
                            </div>
                            
                            <button onClick={handleAnalyze} disabled={!selectedJob || isAnalyzing}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-xl font-bold text-lg hover:shadow-lg transition-all disabled:opacity-50">
                                {isAnalyzing ? '‚è≥ Analyzing...' : 'Analyze AI Risk'}
                            </button>
                        </div>

                        {isAnalyzing && (
                            <div className="bg-white rounded-3xl shadow-xl p-12 text-center">
                                <div className="inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600 mb-4"></div>
                                <p className="text-xl text-gray-700">Calculating personalized score...</p>
                            </div>
                        )}

                        {analysis && !isAnalyzing && (
                            <div className="space-y-6">
                                <div className="bg-gradient-to-r from-purple-600 to-indigo-600 rounded-3xl shadow-xl p-8 text-white text-center">
                                    <div className="text-7xl font-bold mb-2">{analysis.finalScore}</div>
                                    <div className="text-lg opacity-90 mb-4">AI RISK SCORE</div>
                                    <div className="inline-block bg-white/20 px-6 py-3 rounded-full text-2xl font-bold">
                                        {analysis.riskEmoji} {analysis.riskLevel}
                                    </div>
                                </div>

                                <div className="bg-white rounded-3xl shadow-xl p-8">
                                    <h3 className="text-2xl font-bold text-purple-600 mb-6">üî¢ Calculation Breakdown</h3>
                                    
                                    <div className="bg-purple-50 p-6 rounded-xl mb-6">
                                        <h4 className="font-bold mb-4">Task Composition (Autor et al. 2003)</h4>
                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                            <div className="bg-white p-3 rounded">Routine Cognitive: {analysis.taskComp.routineCog}%</div>
                                            <div className="bg-white p-3 rounded">Non-routine Cognitive: {analysis.taskComp.nonRoutineCog}%</div>
                                            <div className="bg-white p-3 rounded">Routine Manual: {analysis.taskComp.routineMan}%</div>
                                            <div className="bg-white p-3 rounded">Non-routine Manual: {analysis.taskComp.nonRoutineMan}%</div>
                                        </div>
                                    </div>

                                    <div className="bg-blue-50 p-6 rounded-xl mb-6">
                                        <h4 className="font-bold mb-4">Engineering Bottlenecks (Frey & Osborne)</h4>
                                        <div className="space-y-2 text-sm">
                                            <div className="bg-white p-3 rounded">Perception/Manipulation: {analysis.bottlenecks.perception.score.toFixed(0)}% (weight: 28%)</div>
                                            <div className="bg-white p-3 rounded">Creative Intelligence: {analysis.bottlenecks.creativity.score.toFixed(0)}% (weight: 42%)</div>
                                            <div className="bg-white p-3 rounded">Social Intelligence: {analysis.bottlenecks.social.score.toFixed(0)}% (weight: 30%)</div>
                                        </div>
                                        <div className="mt-4 p-3 bg-indigo-100 rounded text-center font-bold">
                                            Base Probability: {analysis.baseProb}%
                                        </div>
                                    </div>

                                    <div className="bg-green-50 p-6 rounded-xl mb-6">
                                        <h4 className="font-bold mb-4">WEF 2025 Adjustment</h4>
                                        <div className="text-center">
                                            {analysis.baseProb}% √ó 0.86 (AI transformation rate) = {analysis.wefAdjusted}%
                                        </div>
                                    </div>

                                    <div className="bg-yellow-50 p-6 rounded-xl mb-6">
                                        <h4 className="font-bold mb-4">Personal Multipliers</h4>
                                        <div className="grid grid-cols-2 gap-3 text-sm">
                                            <div className="bg-white p-3 rounded">Education: √ó{analysis.mods.edu.toFixed(2)} ({analysis.mods.eduPts >= 0 ? '+' : ''}{analysis.mods.eduPts} pts)</div>
                                            <div className="bg-white p-3 rounded">Age: √ó{analysis.mods.age.toFixed(2)} ({analysis.mods.agePts >= 0 ? '+' : ''}{analysis.mods.agePts} pts)</div>
                                            <div className="bg-white p-3 rounded">Experience: √ó{analysis.mods.exp.toFixed(2)} ({analysis.mods.expPts >= 0 ? '+' : ''}{analysis.mods.expPts} pts)</div>
                                            <div className="bg-white p-3 rounded">Level: √ó{analysis.mods.level.toFixed(2)} ({analysis.mods.levelPts >= 0 ? '+' : ''}{analysis.mods.levelPts} pts)</div>
                                        </div>
                                        <div className="mt-4 p-3 bg-orange-100 rounded text-center font-bold">
                                            Combined Multiplier: {analysis.combined}
                                        </div>
                                    </div>

                                    <div className="bg-gradient-to-r from-purple-100 to-indigo-100 p-6 rounded-xl">
                                        <h4 className="font-bold text-lg mb-3">Final Calculation</h4>
                                        <div className="text-center space-y-2">
                                            <div>{analysis.wefAdjusted}% √ó {analysis.combined}</div>
                                            <div className="text-3xl font-bold text-purple-600">= {analysis.finalScore}/100</div>
                                            <div className="text-sm">Total Personal Adjustment: {analysis.totalPts >= 0 ? '+' : ''}{analysis.totalPts} points</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white rounded-3xl shadow-xl p-8">
                                    <h3 className="text-2xl font-bold text-purple-600 mb-4">üìä Analysis</h3>
                                    <div className="text-gray-700 whitespace-pre-line">{analysis.rationale}</div>
                                </div>

                                <div className="bg-white rounded-3xl shadow-xl p-8">
                                    <h3 className="text-2xl font-bold text-purple-600 mb-6">üîë Key Factors</h3>
                                    {analysis.factors.map((f, i) => (
                                        <div key={i} className="bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-xl mb-3">
                                            <div className="font-semibold">{f.name}: {f.score}%</div>
                                            <div className="text-sm text-gray-600 mt-1">{f.explanation}</div>
                                        </div>
                                    ))}
                                </div>

                                <div className="bg-white rounded-3xl shadow-xl p-8">
                                    <h3 className="text-2xl font-bold text-purple-600 mb-6">üìå Comparable Roles</h3>
                                    {analysis.roles.map((r, i) => (
                                        <div key={i} className="bg-blue-50 p-4 rounded-xl border-l-4 border-blue-500 mb-3">
                                            <p className="text-gray-800">{r}</p>
                                        </div>
                                    ))}
                                </div>

                                <div className="bg-white rounded-3xl shadow-xl p-8">
                                    <h3 className="text-2xl font-bold text-purple-600 mb-6">üí° Your Strategies</h3>
                                    {analysis.strategies.map((s, i) => (
                                        <div key={i} className="bg-green-50 p-5 rounded-xl border-l-4 border-green-500 mb-3">
                                            <p className="text-gray-800"><strong>{i + 1}.</strong> {s}</p>
                                        </div>
                                    ))}
                                </div>

                                <div className="bg-gray-100 rounded-3xl shadow-xl p-6 text-center">
                                    <p className="text-sm text-gray-700">
                                        <strong className="text-purple-600">Research-Based Methodology</strong><br />
                                        Frey & Osborne (Oxford 2013) | WEF 2025 | OECD 2023 | McKinsey 2024
                                    </p>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
